/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

/ {
    chosen {
        zmk,kscan = &kscan0; 
    };
    
    kscan0: kscan {
        compatible = "zmk,kscan-gpio-direct";
        label = "KSCAN";
        input-gpios
            = <&pro_micro 18 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
            , <&pro_micro 19 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
            , <&pro_micro 20 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
            , <&pro_micro 21 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
            , <&pro_micro 10 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
            , <&pro_micro 16 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
            , <&pro_micro 14 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
            , <&pro_micro 15 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
            , <&pro_micro 7  (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
            , <&pro_micro 8  (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>
            ;

        // Эта property обязательна для поддержки ZMK Studio 
        // при отсутствии zmk,matrix-transform.
        col-lanes = <10>; 
        row-lanes = <1>; 

        key-positions = <
            0  1  2  3
            4  5  6  7
                     8  9
        >;
        
        // Определение физического расположения для ZMK Studio
        // key-positions описывает 10 клавиш. 
        // Ширина каждой клавиши 1.0u, высота 1.0u.
        // X, Y координаты клавиш (в условных единицах 'u'):
        // (0,0) (1,0) (2,0) (3,0) (4,0)
        // (0,1) (1,1) (2,1) (3,1) (4,1)
        key-x = <
            (0.0) (1.0) (2.0) (3.0)
            (0.0) (1.0) (2.0) (3.0)
                        (3.0) (4.0)
        >;

        key-y = <
            (0.0) (0.0) (0.0) (0.0)
            (1.0) (1.0) (1.0) (1.0)
                        (2.0) (2.0)
        >;
    };

};
